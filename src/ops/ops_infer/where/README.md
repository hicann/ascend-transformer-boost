# WhereOperation<a name="ZH-CN_TOPIC_0000001911328085"></a>

## 产品支持情况<a name="section72868502422"></a>

<a name="table19286205084215"></a>
<table><thead align="left"><tr id="row1928795054210"><th class="cellrowborder" valign="top" width="45.24%" id="mcps1.1.4.1.1"><p id="p1328785012423"><a name="p1328785012423"></a><a name="p1328785012423"></a>硬件型号</p>
</th>
<th class="cellrowborder" align="center" valign="top" width="13.68%" id="mcps1.1.4.1.2"><p id="p7287175044211"><a name="p7287175044211"></a><a name="p7287175044211"></a>是否支持</p>
</th>
<th class="cellrowborder" valign="top" width="41.08%" id="mcps1.1.4.1.3"><p id="p16910610191617"><a name="p16910610191617"></a><a name="p16910610191617"></a>特殊说明</p>
</th>
</tr>
</thead>
<tbody><tr id="row15287165034214"><td class="cellrowborder" valign="top" width="45.24%" headers="mcps1.1.4.1.1 "><p id="p111531916378"><a name="p111531916378"></a><a name="p111531916378"></a><span id="ph15628135164314"><a name="ph15628135164314"></a><a name="ph15628135164314"></a><term id="zh-cn_topic_0000001230434678_term12348114314426"><a name="zh-cn_topic_0000001230434678_term12348114314426"></a><a name="zh-cn_topic_0000001230434678_term12348114314426"></a>Atlas A3 推理系列产品</term>/<term id="zh-cn_topic_0000001230434678_term038111499426"><a name="zh-cn_topic_0000001230434678_term038111499426"></a><a name="zh-cn_topic_0000001230434678_term038111499426"></a>Atlas A3 训练系列产品</term></span></p>
</td>
<td class="cellrowborder" align="center" valign="top" width="13.68%" headers="mcps1.1.4.1.2 "><p id="p911285084910"><a name="p911285084910"></a><a name="p911285084910"></a>√</p>
</td>
<td class="cellrowborder" valign="top" width="41.08%" headers="mcps1.1.4.1.3 "><p id="p8910410111611"><a name="p8910410111611"></a><a name="p8910410111611"></a>-</p>
</td>
</tr>
<tr id="row828714503428"><td class="cellrowborder" valign="top" width="45.24%" headers="mcps1.1.4.1.1 "><p id="p1360215120359"><a name="p1360215120359"></a><a name="p1360215120359"></a><span id="ph17606808269"><a name="ph17606808269"></a><a name="ph17606808269"></a><term id="zh-cn_topic_0000001094307702_term9707131642"><a name="zh-cn_topic_0000001094307702_term9707131642"></a><a name="zh-cn_topic_0000001094307702_term9707131642"></a>Atlas A2 训练系列产品</term>/<term id="zh-cn_topic_0000001094307702_term9562134225910"><a name="zh-cn_topic_0000001094307702_term9562134225910"></a><a name="zh-cn_topic_0000001094307702_term9562134225910"></a>Atlas 800I A2 推理产品</term></span></p>
</td>
<td class="cellrowborder" align="center" valign="top" width="13.68%" headers="mcps1.1.4.1.2 "><p id="p51131550124919"><a name="p51131550124919"></a><a name="p51131550124919"></a>√</p>
</td>
<td class="cellrowborder" valign="top" width="41.08%" headers="mcps1.1.4.1.3 "><p id="p18910210181618"><a name="p18910210181618"></a><a name="p18910210181618"></a>-</p>
</td>
</tr>
<tr id="row06710463459"><td class="cellrowborder" valign="top" width="45.24%" headers="mcps1.1.4.1.1 "><p id="p6310134510488"><a name="p6310134510488"></a><a name="p6310134510488"></a><span id="ph129281671814"><a name="ph129281671814"></a><a name="ph129281671814"></a><term id="zh-cn_topic_0000001094307702_term148541578017"><a name="zh-cn_topic_0000001094307702_term148541578017"></a><a name="zh-cn_topic_0000001094307702_term148541578017"></a>Atlas 训练系列产品</term></span></p>
</td>
<td class="cellrowborder" align="center" valign="top" width="13.68%" headers="mcps1.1.4.1.2 "><p id="p147261358131511"><a name="p147261358131511"></a><a name="p147261358131511"></a>√</p>
</td>
<td class="cellrowborder" valign="top" width="41.08%" headers="mcps1.1.4.1.3 "><p id="p18910201012161"><a name="p18910201012161"></a><a name="p18910201012161"></a>-</p>
</td>
</tr>
<tr id="row6681646104519"><td class="cellrowborder" valign="top" width="45.24%" headers="mcps1.1.4.1.1 "><p id="p1515318113710"><a name="p1515318113710"></a><a name="p1515318113710"></a><span id="ph51531311373"><a name="ph51531311373"></a><a name="ph51531311373"></a><term id="zh-cn_topic_0000001094307702_term750195114015"><a name="zh-cn_topic_0000001094307702_term750195114015"></a><a name="zh-cn_topic_0000001094307702_term750195114015"></a>Atlas 推理系列产品</term></span></p>
</td>
<td class="cellrowborder" align="center" valign="top" width="13.68%" headers="mcps1.1.4.1.2 "><p id="p27261758151510"><a name="p27261758151510"></a><a name="p27261758151510"></a>√</p>
</td>
<td class="cellrowborder" valign="top" width="41.08%" headers="mcps1.1.4.1.3 "><p id="p19910191081610"><a name="p19910191081610"></a><a name="p19910191081610"></a>不支持bf16数据类型。</p>
</td>
</tr>
<tr id="row44335016457"><td class="cellrowborder" valign="top" width="45.24%" headers="mcps1.1.4.1.1 "><p id="p1496968132715"><a name="p1496968132715"></a><a name="p1496968132715"></a><span id="ph185255349386"><a name="ph185255349386"></a><a name="ph185255349386"></a><term id="zh-cn_topic_0000001094307702_term19362048506"><a name="zh-cn_topic_0000001094307702_term19362048506"></a><a name="zh-cn_topic_0000001094307702_term19362048506"></a>Atlas 200I/500 A2 推理产品</term></span></p>
</td>
<td class="cellrowborder" align="center" valign="top" width="13.68%" headers="mcps1.1.4.1.2 "><p id="p719415459494"><a name="p719415459494"></a><a name="p719415459494"></a>√</p>
</td>
<td class="cellrowborder" valign="top" width="41.08%" headers="mcps1.1.4.1.3 "><p id="p17910161091615"><a name="p17910161091615"></a><a name="p17910161091615"></a>-</p>
</td>
</tr>
</tbody>
</table>

## 功能说明<a name="section259105813316"></a>

三目运算。

输入张量为cond、x、y，输出张量 z = cond ? x : y。

-   **输入**：

    **cond**（条件张量）：定义了每个元素的选择条件。

    **x**：当条件为 1时，选择的第一个输入张量。

    **y**：当条件为0时，选择的第二个输入张量。

-   **输出**：输出张量的每个元素根据对应位置的条件从x或y中选取，返回一个和x、y形状相同的张量。  z = \(cond == 1 ? x : y\)

## 算子上下文<a name="section693951575317"></a>

![](../../../../docs/images/where.png)

## 定义<a name="section2067518173415"></a>

```
struct WhereParam {
    uint8_t rsv[8] = {0};
};
```

## 参数列表<a name="section20597115618213"></a>

<a name="zh-cn_topic_0122830089_table438764393513"></a>
<table><thead align="left"><tr id="zh-cn_topic_0122830089_row53871743113510"><th class="cellrowborder" valign="top" width="16.69166916691669%" id="mcps1.1.5.1.1"><p id="p8349810103910"><a name="p8349810103910"></a><a name="p8349810103910"></a><strong id="b15349191043913"><a name="b15349191043913"></a><a name="b15349191043913"></a>成员名称</strong></p>
</th>
<th class="cellrowborder" valign="top" width="19.301930193019302%" id="mcps1.1.5.1.2"><p id="p113725710279"><a name="p113725710279"></a><a name="p113725710279"></a>类型</p>
</th>
<th class="cellrowborder" valign="top" width="18.55185518551855%" id="mcps1.1.5.1.3"><p id="p119751535277"><a name="p119751535277"></a><a name="p119751535277"></a>默认值</p>
</th>
<th class="cellrowborder" valign="top" width="45.45454545454545%" id="mcps1.1.5.1.4"><p id="p12349510123916"><a name="p12349510123916"></a><a name="p12349510123916"></a><strong id="b1234914106390"><a name="b1234914106390"></a><a name="b1234914106390"></a>描述</strong></p>
</th>
</tr>
</thead>
<tbody><tr id="row213301215275"><td class="cellrowborder" valign="top" width="16.69166916691669%" headers="mcps1.1.5.1.1 "><p id="p39532015112219"><a name="p39532015112219"></a><a name="p39532015112219"></a>rsv[8]</p>
</td>
<td class="cellrowborder" valign="top" width="19.301930193019302%" headers="mcps1.1.5.1.2 "><p id="p12233103022919"><a name="p12233103022919"></a><a name="p12233103022919"></a>uint8_t</p>
</td>
<td class="cellrowborder" valign="top" width="18.55185518551855%" headers="mcps1.1.5.1.3 "><p id="p7158655162411"><a name="p7158655162411"></a><a name="p7158655162411"></a>{0}</p>
</td>
<td class="cellrowborder" valign="top" width="45.45454545454545%" headers="mcps1.1.5.1.4 "><p id="p109533152229"><a name="p109533152229"></a><a name="p109533152229"></a>预留参数。</p>
</td>
</tr>
</tbody>
</table>

## 输入<a name="section1861819453396"></a>

<a name="table1384143194015"></a>
<table><thead align="left"><tr id="row1938484334014"><th class="cellrowborder" valign="top" width="13.198680131986801%" id="mcps1.1.6.1.1"><p id="p14761845134015"><a name="p14761845134015"></a><a name="p14761845134015"></a><strong id="b197619459409"><a name="b197619459409"></a><a name="b197619459409"></a>参数</strong></p>
</th>
<th class="cellrowborder" valign="top" width="34.696530346965304%" id="mcps1.1.6.1.2"><p id="p107611451405"><a name="p107611451405"></a><a name="p107611451405"></a><strong id="b17761174554014"><a name="b17761174554014"></a><a name="b17761174554014"></a>维度</strong></p>
</th>
<th class="cellrowborder" valign="top" width="14.258574142585742%" id="mcps1.1.6.1.3"><p id="p17761194584016"><a name="p17761194584016"></a><a name="p17761194584016"></a><strong id="b10507259101715"><a name="b10507259101715"></a><a name="b10507259101715"></a>数据类型</strong></p>
</th>
<th class="cellrowborder" valign="top" width="11.838816118388163%" id="mcps1.1.6.1.4"><p id="p20761104524015"><a name="p20761104524015"></a><a name="p20761104524015"></a><strong id="b876154516405"><a name="b876154516405"></a><a name="b876154516405"></a>格式</strong></p>
</th>
<th class="cellrowborder" valign="top" width="26.007399260073992%" id="mcps1.1.6.1.5"><p id="p143411744175819"><a name="p143411744175819"></a><a name="p143411744175819"></a>描述</p>
</th>
</tr>
</thead>
<tbody><tr id="row193841430406"><td class="cellrowborder" valign="top" width="13.198680131986801%" headers="mcps1.1.6.1.1 "><p id="p57491830804"><a name="p57491830804"></a><a name="p57491830804"></a>cond</p>
</td>
<td class="cellrowborder" valign="top" width="34.696530346965304%" headers="mcps1.1.6.1.2 "><p id="p7952115717489"><a name="p7952115717489"></a><a name="p7952115717489"></a>[dim_0, dim_1, ..., dim_n]</p>
</td>
<td class="cellrowborder" valign="top" width="14.258574142585742%" headers="mcps1.1.6.1.3 "><p id="p57505301303"><a name="p57505301303"></a><a name="p57505301303"></a>int8</p>
</td>
<td class="cellrowborder" valign="top" width="11.838816118388163%" headers="mcps1.1.6.1.4 "><p id="p137509302006"><a name="p137509302006"></a><a name="p137509302006"></a>ND</p>
</td>
<td class="cellrowborder" valign="top" width="26.007399260073992%" headers="mcps1.1.6.1.5 "><p id="p17341144410588"><a name="p17341144410588"></a><a name="p17341144410588"></a>输出tensor1，条件变量。</p>
</td>
</tr>
<tr id="row194655345514"><td class="cellrowborder" valign="top" width="13.198680131986801%" headers="mcps1.1.6.1.1 "><p id="p187501230806"><a name="p187501230806"></a><a name="p187501230806"></a>x</p>
</td>
<td class="cellrowborder" valign="top" width="34.696530346965304%" headers="mcps1.1.6.1.2 "><p id="p18592376527"><a name="p18592376527"></a><a name="p18592376527"></a>[x_dim_0, x_dim_1, ..., x_dim_n]</p>
</td>
<td class="cellrowborder" valign="top" width="14.258574142585742%" headers="mcps1.1.6.1.3 "><p id="p675063011016"><a name="p675063011016"></a><a name="p675063011016"></a>float16</p>
</td>
<td class="cellrowborder" valign="top" width="11.838816118388163%" headers="mcps1.1.6.1.4 "><p id="p197503301504"><a name="p197503301504"></a><a name="p197503301504"></a>ND</p>
</td>
<td class="cellrowborder" valign="top" width="26.007399260073992%" headers="mcps1.1.6.1.5 "><p id="p17341944105816"><a name="p17341944105816"></a><a name="p17341944105816"></a>输入tensor2。</p>
</td>
</tr>
<tr id="row13114527700"><td class="cellrowborder" valign="top" width="13.198680131986801%" headers="mcps1.1.6.1.1 "><p id="p137501730503"><a name="p137501730503"></a><a name="p137501730503"></a>y</p>
</td>
<td class="cellrowborder" valign="top" width="34.696530346965304%" headers="mcps1.1.6.1.2 "><p id="p251643818525"><a name="p251643818525"></a><a name="p251643818525"></a>[y_dim_0, y_dim_1, ..., y_dim_n]</p>
</td>
<td class="cellrowborder" valign="top" width="14.258574142585742%" headers="mcps1.1.6.1.3 "><p id="p14750133018018"><a name="p14750133018018"></a><a name="p14750133018018"></a>float16</p>
</td>
<td class="cellrowborder" valign="top" width="11.838816118388163%" headers="mcps1.1.6.1.4 "><p id="p4750193012012"><a name="p4750193012012"></a><a name="p4750193012012"></a>ND</p>
</td>
<td class="cellrowborder" valign="top" width="26.007399260073992%" headers="mcps1.1.6.1.5 "><p id="p83415446582"><a name="p83415446582"></a><a name="p83415446582"></a>输入tensor3。</p>
</td>
</tr>
</tbody>
</table>

## 输出<a name="section42644773910"></a>

<a name="table1572012604111"></a>
<table><thead align="left"><tr id="row17201166416"><th class="cellrowborder" valign="top" width="13.44865513448655%" id="mcps1.1.6.1.1"><p id="p127203654111"><a name="p127203654111"></a><a name="p127203654111"></a><strong id="b20720206164111"><a name="b20720206164111"></a><a name="b20720206164111"></a>参数</strong></p>
</th>
<th class="cellrowborder" valign="top" width="33.946605339466046%" id="mcps1.1.6.1.2"><p id="p87201069415"><a name="p87201069415"></a><a name="p87201069415"></a><strong id="b472013604115"><a name="b472013604115"></a><a name="b472013604115"></a>维度</strong></p>
</th>
<th class="cellrowborder" valign="top" width="14.62853714628537%" id="mcps1.1.6.1.3"><p id="p57207624119"><a name="p57207624119"></a><a name="p57207624119"></a><strong id="b17909164271710"><a name="b17909164271710"></a><a name="b17909164271710"></a>数据类型</strong></p>
</th>
<th class="cellrowborder" valign="top" width="11.96880311968803%" id="mcps1.1.6.1.4"><p id="p17720965418"><a name="p17720965418"></a><a name="p17720965418"></a><strong id="b072017613413"><a name="b072017613413"></a><a name="b072017613413"></a>格式</strong></p>
</th>
<th class="cellrowborder" valign="top" width="26.00739926007399%" id="mcps1.1.6.1.5"><p id="p1052013488589"><a name="p1052013488589"></a><a name="p1052013488589"></a>描述</p>
</th>
</tr>
</thead>
<tbody><tr id="row472113674111"><td class="cellrowborder" valign="top" width="13.44865513448655%" headers="mcps1.1.6.1.1 "><p id="p47506301503"><a name="p47506301503"></a><a name="p47506301503"></a>z</p>
</td>
<td class="cellrowborder" valign="top" width="33.946605339466046%" headers="mcps1.1.6.1.2 "><p id="p86164235218"><a name="p86164235218"></a><a name="p86164235218"></a>[z_dim_0, z_dim_1, ..., z_dim_n]</p>
</td>
<td class="cellrowborder" valign="top" width="14.62853714628537%" headers="mcps1.1.6.1.3 "><p id="p157507303017"><a name="p157507303017"></a><a name="p157507303017"></a>float16</p>
</td>
<td class="cellrowborder" valign="top" width="11.96880311968803%" headers="mcps1.1.6.1.4 "><p id="p12750133010013"><a name="p12750133010013"></a><a name="p12750133010013"></a>ND</p>
</td>
<td class="cellrowborder" valign="top" width="26.00739926007399%" headers="mcps1.1.6.1.5 "><p id="p4616131716596"><a name="p4616131716596"></a><a name="p4616131716596"></a>输出tensor。</p>
</td>
</tr>
</tbody>
</table>

## 约束说明<a name="section66163225220"></a>

输入cond的元素只能是0或者1。输出z的维度为输入x与y广播后的结果。要求cond、x、y必须是可广播的。

## 接口调用示例<a name="section12313188907"></a>

**输入：**

```
cond = [[1, 0], 
        [0, 1]]
   x = [[1, 2],
        [3, 4]]
   y = [[10, 20],
        [30, 40]]
```

**输出：**

```
z = [[ 1, 20],
    [30, 4]]
```

