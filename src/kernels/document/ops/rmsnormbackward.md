# RmsNormBackward
## 参数说明
- **OpName**：NormOperation
- **PARAM**
**Param Type**：OpParam::Norm

| 名称  | 类型  | 描述 |
| ------------ | ------------ | ------------ |
| normType | enum  | RMS_NORM_BACKWARD |
|epsilon|float|Layernorm类算子属性|

- **In/Out Tensor**

|名称 | 类型  | dims  | dtype  |format|描述|
| ------------ | ------------ | ------------ | ------------ |------------ |------------ |
|  dy|In  | [$d_0$, $d_1$, ..., $d_n$]|float16、float、bfloat16|ND||
| x |  In| [$d_0$, $d_1$, ..., $n$]| 与dy一致|ND|2维|
| rstd |In  | [$batch_size$]|float|ND|2维|
| gamma |In  | [$d_n$]|与dy一致|ND||
| dx |Out  | [$d_0$, $d_1$, ..., $n$]|与dy一致|ND||
| dgamma |Out  | [$d_n$]|float|ND||

## 功能描述
- 算子功能：RmsNorm反向算子
- 计算公式：dgamma = torch.sum((dy * x * rstd).reshape([-1, S]), dim=0, keepdim=True)
dx = dy * gamma * rstd - torch.mean(dy * gamma * rstd.pow(3) * x, dim=-1, keepdim=True) * x
## 示例
```
输入：
    dy = [[[33.894768,  33.53869,  95.62179,    42.681, 12.195218, 0.56607574, 94.07087, 97.381775]],
          [[45.025936,  69.61183, 32.372124, 23.307575,  58.81827,   59.63862, 95.03635, 91.181694]],
          [[32.690987,  79.89721,  95.72585,  74.88011, 17.223488,    24.7475, 23.63896, 32.116077]],
          [[38.168987, 36.882748,  94.33803,  65.60065, 1.3352903,  30.147123, 40.43695,  94.98557]]]

    
    x = [[[2.61636410e+01, 2.62192822e+00, 1.61580741e-02, 1.47824965e+01, 2.97328033e+01, 4.60882378e+01, 1.13739948e+01, 7.69068298e+01]],
         [[1.24803505e+01, 2.69680214e+01, 2.28519726e+01, 5.62774124e+01, 6.45956879e+01, 7.81595135e+00, 2.08093224e+01, 6.16670952e+01]],
         [[7.60528564e+01, 5.67816772e+01, 3.37512054e+01, 4.83810158e+01, 6.18883400e+01, 1.32349670e-01, 6.64376984e+01, 6.28973083e+01]],
         [[1.45304146e+01, 8.15410843e+01, 7.18974993e-02, 9.45407944e+01, 7.71088028e+01, 6.85362396e+01, 2.32412376e+01, 9.69159546e+01]]]


    rstd = [[[0.02833798]],
            [[0.02476702]],
            [[0.01800112]],
            [[0.01483031]]]

    gamma = [23.846336, 43.353977, 79.94772, 24.18683, 27.549986, 90.31294, 44.47145, 20.740677]

输出：
    dx = [[[ 3.8814e+00,  3.9298e+01,  2.1662e+02,  1.8506e+01, -1.2097e+01,-3.2061e+01,  1.1028e+02,  1.3180e+00]],
          [[ 1.3865e+01,  4.7244e+01,  4.0795e+01, -4.3428e+01, -2.5740e+01, 1.2543e+02,  8.3455e+01, -1.6048e+01]],
          [[-2.7185e+01,  3.1580e+01,  1.1947e+02,  6.3812e+00, -2.5000e+01, 4.0161e+01, -1.7083e+01, -2.2097e+01]],
          [[ 9.2547e+00, -1.0084e-01,  1.1183e+02, -4.0805e+00, -2.1975e+01, 2.0362e+01,  1.9881e+01,  9.1161e-01]]]
    
    dgamma = [92.0282, 175.2541, 76.6254, 207.5566, 125.0903, 42.9849, 121.5095, 524.3798]   
```
## 支持芯片型号

|芯片名称|约束 | 
| ------------ | ------------ | 
|  ascend910b|无|

