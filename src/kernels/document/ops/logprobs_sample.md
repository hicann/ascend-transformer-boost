# LogprobsSample
## 参数说明
- **OpName**：LogprobsSampleOperation
- **PARAM**
**Param Type**：OpParam::LogprobsSample
 
| 名称           | 类型  | 描述 |
|--------------| ----------- | ------------ |
| logprobsSize |int32_t||
 
- **In/Out Tensor**
 
|名称 | 类型  | dims                  | dtype            |
| ------------ | ------------ |-----------------------|------------------|
|sorted_probs|In	| [batch, vocal_size]   | float16/bfloat16 |
|cumsumed_probs|In	| [batch, vocal_size]   | float16/bfloat16 |
|select_range|In| [batch]               | 	int32_t	        |
|output_logprobs|Out	| [batch, logprobsSize] | 	float32         |	
 
## 功能描述
- 算子功能：后处理算子生成logprobs输出。每个batch对于[0:logprobsSize)的每一个index，若index < select_range，
  则为归一化后的对数概率，否则为-9999
## 示例
```
参数：
logprobsSize = 6
输入:
sorted_probs = [[0.2771, 0.1678, 0.1399, 0.1328, 0.0880, 0.0681, 0.0461, 0.0425, 0.0298, 0.0079],
                [0.3496, 0.2327, 0.1057, 0.0972, 0.0500, 0.0418, 0.0378, 0.0341, 0.0256, 0.0254],
                [0.2556, 0.2013, 0.1571, 0.0908, 0.0904, 0.0744, 0.0481, 0.0455, 0.0243, 0.0123],
                [0.3433, 0.1489, 0.1346, 0.1098, 0.0567, 0.0558, 0.0508, 0.0507, 0.0250, 0.0245],
                [0.2041, 0.1833, 0.1674, 0.1553, 0.1154, 0.0663, 0.0343, 0.0287, 0.0253, 0.0199]]
 
cumsumed_probs = [[0.2771, 0.4451, 0.5850, 0.7178, 0.8057, 0.8735, 0.9199, 0.9624, 0.9922, 1.0000],
                  [0.3496, 0.5825, 0.6880, 0.7852, 0.8354, 0.8770, 0.9150, 0.9492, 0.9746, 1.0000],
                  [0.2556, 0.4570, 0.6143, 0.7051, 0.7954, 0.8696, 0.9180, 0.9634, 0.9878, 1.0000],
                  [0.3433, 0.4922, 0.6270, 0.7368, 0.7935, 0.8491, 0.8999, 0.9507, 0.9756, 1.0000],
                  [0.2041, 0.3875, 0.5547, 0.7100, 0.8252, 0.8916, 0.9258, 0.9546, 0.9800, 1.0000]]
select_range = [6, 6, 7, 7, 1]

 输出:
output_logprobs = [[-1.1482e+00, -1.6495e+00, -1.8317e+00, -1.8836e+00, -2.2951e+00, -2.5522e+00],
                   [-9.1964e-01, -1.3268e+00, -2.1163e+00, -2.1994e+00, -2.8635e+00, -3.0433e+00],
                   [-1.2785e+00, -1.5174e+00, -1.7653e+00, -2.3140e+00, -2.3180e+00, -2.5127e+00],
                   [-9.6379e-01, -1.7988e+00, -1.8997e+00, -2.1036e+00, -2.7650e+00, -2.7808e+00],
                   [ 0.0000e+00, -9.9990e+03, -9.9990e+03, -9.9990e+03, -9.9990e+03, -9.9990e+03]]
```
 
## 支持芯片型号
 
|芯片名称|约束 | 
| ------------ | ------------ | 
|  ascend910b|无|
|  ascend310p|无|