
# SwiGluBackward
## 参数说明
- **OpName**：ActivationOperation
- **PARAM**
**Param Type**：OpParam::Activation

| 名称  | 类型  | 描述 |
| ------------ | ------------ | ------------ |
| activationType | enum  | ACTIVATION_SWIGLU_BACKWARD |
| dim |int32_t  | 分割和拼接的轴 |

- **In/Out Tensor**

|名称 | 类型  | dims  | dtype  |format|
| ------------ | ------------ | ------------ | ------------ |------------ |
|  y_grad|In  | [$d_0$, $d_1$, ..., $d_{dim}$, ..., $d_n$]|bfloat16、float、float16|ND|
|  x     |In  | [$d_0$, $d_1$, ..., $2 * d_{dim}$, ..., $d_n$]|与y_grad一致|ND|
|  x_grad|Out | [$d_0$, $d_1$, ..., $2 * d_{dim}$, ..., $d_n$] |与y_grad一致 |ND|

## 功能描述
- 算子功能：swiglu正向算子的反向,求梯度时使用。
- 计算公式：
$x\_grad_1=x_2*y\_grad*(\frac{1}{1+e^{-x_1}}+x_1*(1-\frac{1}{1+e^{-x_1}})*\frac{1}{1+e^{-x_1}})$
$x\_grad_2=y\_grad*x_1*\frac{1}{1+e^{-x_1}}$

注：$x_1$和$x_2$为$x$在$dim$轴的2等分向量，$x\_grad$为$x\_grad_1$和$x\_grad_2$在$dim$轴的拼接向量。

## 示例
```
输入：
	dim = -1
	
	x = [[[-0.35485336,  1.0130054,  -0.5638384, -0.37232915],
  		  [-0.23552416, 0.24328443,  -0.9097736,   0.6532926]],
 		 [[-0.15482557,  1.8653425, -0.53066266, -0.35669518],
 	 	  [ -1.2501936, -0.4813922, -0.46782213, -0.42938662]]]

	y = [[[-1.3679188, -1.0441184, -0.22074082, 0.03593443,  1.4115285,    1.282259,    0.84023,    1.771059],
  		  [ 1.5002724,  1.0429292,  -1.9602783, -1.8251027, -1.8176465,  0.10162846, 0.67142487,   1.8118083]],
 		 [[0.27373865, -0.8571074,  -1.0940319, -1.4199644,  -1.031699, -0.22957233,  1.9406945, -0.85718286],
  		  [ 1.2837671, -1.7143688,    1.460285, -0.1948799, -1.9476911,   1.8731744,  -1.798051,  -1.9383575]]]

输出：
	z = [[[0.0092,  0.0762, -0.1846, -0.3418,  0.0986, -0.2754,  0.0552, -0.0068],
          [0.4453,  0.0232,  0.0542, -0.0942, -0.2891,  0.1865,  0.2197, -0.1650]],
         [[0.1016, -0.0510, -0.0466, -0.0087, -0.0242, -0.4766,  0.1455,  0.0986],
          [2.4375,  0.0620,  0.8711,  0.3359, -1.2500,  0.1260, -0.5547,  0.0378]]]

```
## 支持芯片型号

|芯片名称|约束 | 
| ------------ | ------------ | 
|  ascend910b|无|
